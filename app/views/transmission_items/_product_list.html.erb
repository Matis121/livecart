<% products.each do |product| %>
  <button 
      type="button"
      class="flex items-center gap-3 p-3 hover:bg-base-200 active:bg-base-300 w-full text-left rounded-lg transition-colors"
      data-action="click->transmission-items-form#selectProduct"
    data-product-id="<%= product.id %>"
    data-product-name="<%= product.name %>"
    data-product-sku="<%= product.sku %>"
    data-product-ean="<%= product.ean %>"
    data-product-quantity="<%= product.quantity %>"
    data-product-image="<%= product.images.attached? ? url_for(product.images.first.variant(resize_to_limit: [100, 100])) : '' %>">
    <!-- Zdjęcie -->
    <div class="avatar flex-shrink-0">
      <div class="w-12 h-12 rounded">
        <% if product.images.attached? %>
          <%= image_tag product.images.first.variant(resize_to_limit: [100, 100]), 
              alt: product.name, 
              class: "object-cover w-full h-full", 
              loading: "lazy" %>
        <% else %>
          <div class="w-full h-full bg-base-200 flex items-center justify-center">
            <%= lucide_icon("image", class: "w-6 h-6 opacity-30") %>
          </div>
        <% end %>
      </div>
    </div>
    <!-- Informacje -->
    <div class="flex-1 min-w-0">
      <div class="font-medium truncate"><%= product.name %></div>
      <div class="text-xs opacity-60">
        <div>SKU: <%= product.sku.presence || '-' %></div>
        <div>EAN: <%= product.ean.presence || '-' %></div>
      </div>
    </div>
    <!-- Ilość -->
    <div class="flex-shrink-0 text-right">
      <div class="text-sm font-semibold text-base-content">
        <%= product.quantity.to_i %> szt.
      </div>
      <div class="text-xs opacity-60">
        stan
      </div>
    </div>
  </button>
<% end %>
