<%= turbo_frame_tag "transmission_item_modal" do %>
  <dialog id="transmission-item-modal" class="modal modal-open">
    <div class="modal-box w-full max-w-lg">
      <h3 class="font-semibold text-lg">Edycja pozycji</h3>
      <%= form_with model: [@transmission, @transmission_item], class: "space-y-4 mt-4" do |f| %>
        <div class="space-y-2">
          <div class="text-sm text-base-content/70">Klient</div>
          <div class="font-medium"><%= @transmission_item.customer.name %></div>
        </div>
        <div class="grid grid-cols-2 gap-3">
          <label class="form-control">
            <span class="label-text">Ilość</span>
            <%= f.number_field :quantity, min: 1, class: "input input-bordered input-sm w-full text-right" %>
          </label>
          <label class="form-control">
            <span class="label-text">Cena jednostkowa</span>
            <%= f.number_field :unit_price, min: 0, step: 0.01, class: "input input-bordered input-sm w-full text-right" %>
          </label>
        </div>
        <div class="text-right font-medium tabular-nums">
          <span class="text-base-content/60 text-sm">~<%= number_to_currency(@transmission_item.unit_price * @transmission_item.quantity, unit: "zł", format: "%n %u") %></span>
        </div>
        <div class="modal-action">
          <%= button_tag type: "button", class: "btn btn-ghost",
        onclick: "document.getElementById('transmission_item_modal').innerHTML = ''" do %>
            Anuluj
          <% end %>
          <%= f.submit "Zapisz", class: "btn btn-primary btn-sm" %>
        </div>
      <% end %>
    </div>
    <div class="modal-backdrop"
         onclick="document.getElementById('transmission_item_modal').innerHTML = ''">
    </div>
  </dialog>
<% end %>