<div id="flash_messages" class="toast toast-end toast-top z-50 p-4 space-y-3">
  <% flash.each do |type, message| %>
    <% 
      # Kolory akcentowe zamiast całego tła
      accent_color = case type.to_sym
                     when :notice, :success then "text-emerald-500 border-emerald-500/20"
                     when :alert, :error    then "text-rose-500 border-rose-500/20"
                     else "text-blue-500 border-blue-500/20"
                     end
    %>
    <div data-controller="notification"
         data-notification-delay-value="4000"
         class="flex items-center gap-3 min-w-[320px] max-w-md p-4 rounded-xl border bg-base-100/80 backdrop-blur-md shadow-2xl shadow-base-300/20 transition-all duration-500 pointer-events-auto <%= accent_color %>"
         data-transition-enter-from="opacity-0 translate-y-[-20px] scale-95"
         data-transition-enter-to="opacity-100 translate-y-0 scale-100"
         data-transition-leave-from="opacity-100 scale-100"
         data-transition-leave-to="opacity-0 scale-95">
      <%# Ikona z delikatnym tłem %>
      <div class="shrink-0">
        <%= lucide_icon(type.to_sym == :error ? "circle-alert" : "circle-check", class: "w-5 h-5") %>
      </div>
      <%# Treść %>
      <div class="flex-1 text-sm font-medium text-base-content/90">
        <%= message %>
      </div>
      <%# Przycisk zamknięcia - prawie niewidoczny do hovera %>
      <button data-action="notification#hide" 
              class="group shrink-0 p-1 hover:bg-base-200 rounded-lg transition-colors">
        <%= lucide_icon "x", class: "w-4 h-4 text-base-content/30 group-hover:text-base-content/100" %>
      </button>
    </div>
  <% end %>
</div>