<%= form_with model: @shipping_method, url: @shipping_method.persisted? ? settings_shipping_method_path(@shipping_method) : settings_shipping_methods_path, data: { controller: "shipping-method-form", turbo_frame: "_top" }, local: true do |f| %>
  <div class="space-y-3">
    <div class="form-control">
      <%= f.label :name, "Nazwa", class: "label" %>
      <%= f.text_field :name, class: "input input-bordered w-full focus:input-primary #{@shipping_method.errors[:name].any? ? 'input-error' : ''}", placeholder: "np. Kurier DPD, Paczkomat InPost", maxlength: 50 %>
      <% @shipping_method.errors[:name].each do |message| %>
        <label class="label"><span class="text-error text-sm"><%= message %></span></label>
      <% end %>
    </div>
    <div class="form-control">
      <%= f.label :price, "Cena (zł)", class: "label" %>
      <%= f.number_field :price, class: "input input-bordered w-full focus:input-primary #{@shipping_method.errors[:price].any? ? 'input-error' : ''}", step: 0.01, min: 0 %>
      <% @shipping_method.errors[:price].each do |message| %>
        <label class="label"><span class="text-error text-sm"><%= message %></span></label>
      <% end %>
    </div>
    <div class="form-control">
      <%= f.label :free_above, "Darmowa od kwoty (zł)", class: "label" %>
      <%= f.number_field :free_above, class: "input input-bordered w-full focus:input-primary #{@shipping_method.errors[:free_above].any? ? 'input-error' : ''}", step: 0.01, min: 0, placeholder: "Zostaw puste jeśli nie dotyczy" %>
      <% @shipping_method.errors[:free_above].each do |message| %>
        <label class="label"><span class="text-error text-sm"><%= message %></span></label>
      <% end %>
    </div>
    <div class="form-control">
      <label class="label cursor-pointer justify-start gap-3">
        <%= f.check_box :is_pickup_point, class: "toggle toggle-primary toggle-sm", data: { action: "change->shipping-method-form#togglePickupProvider" } %>
        <span class="label-text">Punkt odbioru</span>
      </label>
    </div>
    <div class="form-control" data-shipping-method-form-target="pickupProvider" style="<%= 'display: none;' unless @shipping_method.is_pickup_point? %>">
      <%= f.label :pickup_point_provider, "Dostawca punktów", class: "label" %>
      <%= f.select :pickup_point_provider, options_for_select(ShippingMethod.pickup_point_providers.keys.map { |k| [k.humanize, k] }, @shipping_method.pickup_point_provider), { include_blank: "Wybierz dostawcę..." }, class: "select select-bordered w-full focus:select-primary #{@shipping_method.errors[:pickup_point_provider].any? ? 'select-error' : ''}" %>
      <% @shipping_method.errors[:pickup_point_provider].each do |message| %>
        <label class="label"><span class="text-error text-sm"><%= message %></span></label>
      <% end %>
    </div>
    <div class="form-control">
      <label class="label cursor-pointer justify-start gap-3">
        <%= f.check_box :active, class: "toggle toggle-primary toggle-sm" %>
        <span class="label-text">Aktywna</span>
      </label>
    </div>
  </div>
  <div class="modal-action">
    <button type="button" class="btn btn-ghost" onclick="document.getElementById('shipping_method_modal').innerHTML = ''">Anuluj</button>
    <%= f.submit "Zapisz", class: "btn btn-primary" %>
  </div>
<% end %>