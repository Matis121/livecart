<!-- app/views/settings/checkout/edit.html.erb -->
<div class="container mx-auto px-4 py-6 sm:py-8 max-w-4xl">
  <!-- Header -->
  <div class="mb-6">
    <h1 class="text-2xl sm:text-3xl font-bold mb-2">Ustawienia koszyka</h1>
    <p class="text-base-content/70">Edytuj podstawowe informacje o sklepie</p>
  </div>
  <!-- Form -->
  <%= form_with model: current_account, url: settings_checkout_path, method: :patch, local: true, html: { multipart: true } do |f| %>
    <div class="card bg-base-100 shadow-sm">
      <div class="card-body space-y-6">
        <!-- Logo -->
        <div class="form-control">
          <%= f.label :logo, "Logo", class: "label" %>
          <% if current_account.logo.attached? %>
            <div class="mb-3">
              <%= image_tag current_account.logo, class: "w-32 h-32 object-contain rounded-lg border" %>
              <label class="label cursor-pointer mt-2">
                <span class="label-text">Usuń logo</span>
                <%= check_box_tag "account[remove_logo]", '1', false, class: "checkbox checkbox-sm" %>
              </label>
            </div>
          <% end %>
          <%= f.file_field :logo, accept: "image/png,image/jpeg,image/jpg,image/gif", class: "file-input file-input-bordered w-full" %>
          <label class="label">
            <span class="label-text-alt text-base-content/50">PNG, JPEG, GIF • maks. 5MB</span>
          </label>
        </div>
        <!-- Nazwa sklepu -->
        <div class="form-control">
          <%= f.label :name, "Nazwa sklepu", class: "label" %>
          <%= f.text_field :name, 
              value: @checkout_settings['name'] || current_account.company_name,
              class: "input input-bordered w-full" %>
        </div>
        <!-- Czas na płatność -->
        <div class="form-control">
          <%= f.label :time_to_pay, "Czas na płatność (godziny)", class: "label" %>
          <%= f.number_field :time_to_pay, 
              value: @checkout_settings['time_to_pay'] || '0',
              class: "input input-bordered w-full",
              min: 0 %>
        </div>
        <!-- Aktywuj czas na płatność -->
        <div class="form-control">
          <label class="label cursor-pointer">
            <span class="label-text">Aktywuj limit czasu na płatność</span>
            <%= f.check_box :time_to_pay_active, 
                { checked: @checkout_settings['time_to_pay_active'] == '1' },
                '1', '0' %>
          </label>
        </div>
      </div>
    </div>
    <!-- Przyciski -->
    <div class="flex justify-end gap-2 mt-6">
      <%= link_to "Anuluj", settings_root_path, class: "btn btn-ghost" %>
      <%= f.submit "Zapisz", class: "btn btn-primary" %>
    </div>
  <% end %>
</div>